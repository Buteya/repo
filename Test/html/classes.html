<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classes JavaScript</title>
</head>
<body>
    <script>
        //Class Declaration
        class Rectangle{
            #height;
            #width;
            constructor(height,width){
                this.#height = height;
                this.#width = width;
            }
            get height(){
                console.log(`The height of Your Rectangle is: ${this.#height}`);
                return this.#height;
            }
            set height(newValue){
                this.#height = newValue;
            }
            get width(){
                console.log(`The width of your Rectangle is: ${this.#width}`);
                return this.#width;
            }
            set width(newValue){
                this.#width = newValue;
            }
            areaOfRect = ()=>{
                let area = this.#height * this.#width;
                console.log(`The area of your Rectangle is: ${area}`);
                return area;
            }
            // areaOfRect = (height,width) =>{
            //     let area = height * width;
            //     console.log(area);
            //     return area;
            // }
            *getSides(){
                yield this.#height;
                yield this.#width;
                yield this.#height;
                yield this.#width;
            }
        }

        //Expression; The class is anonymous but assigned to a variable
        const Rectangle1 = class {
            #height;
            #width;
            constructor(height,width){
                this.#height = height;
                this.#width = width;
            }
            get height(){
                console.log(`The height of Your Rectangle is: ${this.#height}`);
                return this.#height;
            }
            set height(newValue){
                this.#height = newValue;
            }
            get width(){
                console.log(`The width of your Rectangle is: ${this.#width}`);
                return this.#width;
            }
            set width(newValue){
                this.#width = newValue;
            }
            areaOfRect = ()=>{
                let area = this.#height * this.#width;
                console.log(`The area of your Rectangle is: ${area}`);
                return area;
            }
            // areaOfRect = (height,width) =>{
            //     let area = height * width;
            //     console.log(area);
            //     return area;
            // }
            *getSides(){
                yield this.#height;
                yield this.#width;
                yield this.#height;
                yield this.#width;
            }
        };

        //Expression; The class has it`s own name
        const Rectangle2 = class Rectangle3 {
            #height;
            #width;
            constructor(height,width){
                this.#height = height;
                this.#width = width;
            }
            get height(){
                console.log(`The height of Your Rectangle is: ${this.#height}`);
                return this.#height;
            }
            set height(newValue){
                this.#height = newValue;
            }
            get width(){
                console.log(`The width of your Rectangle is: ${this.#width}`);
                return this.#width;
            }
            set width(newValue){
                this.#width = newValue;
            }
            areaOfRect = ()=>{
                let area = this.#height * this.#width;
                console.log(`The area of your Rectangle is: ${area}`);
                return area;
            }
            // areaOfRect = (height,width) =>{
            //     let area = height * width;
            //     console.log(area);
            //     return area;
            // }
            *getSides(){
                yield this.#height;
                yield this.#width;
                yield this.#height;
                yield this.#width;
            }
        };
        let rect = new Rectangle();
        rect.height = 10;
        rect.height;
        rect.width = 12;
        rect.width;
        rect.areaOfRect();
        console.log([...rect.getSides()]);
        let rect1 = new Rectangle(12,34);
        rect1.height;
        rect1.width;
        rect1.areaOfRect();
        console.log([...rect1.getSides()]);

        class Point{
            constructor(x,y){
                this.x = x;
                this.y = y;
            }

            static displayName = "Point";
            static distance(a,b){
                const dx = a.x - b.x;
                const dy = a.y - b.y;
                return Math.hypot(dx,dy);
            }
        }
        const p1 = new Point(5,5);
        const p2 = new Point(10,10);
        p1.displayName;
        p1.distance;
        p2.displayName;
        p2.distance;
        console.log(Point.displayName);
        console.log(Point.distance(p1,p2));

        class Car {
            constructor(name){
                this.brand = name;
            }
            present(){
                return 'I have a ' + this.brand;
            }
        }
        class Model extends Car {
            constructor(name,mod){
                super(name);
                this.model = mod;
            }
            show(){
                return this.present() + ', it is a ' + this.model;
            }
        }
        const mycar = new Car("Ford");
        console.log(mycar.present());
        const newcar = new Model("Ford","Mustang");
        console.log(newcar.show());

        class Animal {
            constructor(name){
                this.name = name;
            }
            speak(){
                console.log(`${this.name} make a noise.`);
            }
        }
        class Dog extends Animal{
            constructor(name){
                super(name);
            }
            speak(){
                console.log(`${this.name} barks.`);
            }
        }
        const d = new Dog("Mitzie");
        d.speak();

        class Cat {
            constructor(name){
                this.name = name;
            }
            speak(){
                console.log(`${this.name} make a noise.`);
            }
        }
        class Lion extends Cat{
            speak(){
                super.speak();
                console.log(`${this.name} roars.`);
            }
        }
        const l = new Lion("Fuzzy");
        l.speak();
        class Polygon {
            constructor(){
                this.name = "Polygon";
            }
        }

        let poly1 = new Polygon();
        console.log(poly1.name);
        class Person {
            constructor(name = "Anonymous"){
                this.name = name;
            }
            introduce(){
                console.log(`Hello, my name is ${this.name}`);
            }
        }
        let person = new Person();
        person.introduce();
        class ValidationError extends Error{
            constructor(message){
                super(message);
                this.name = "ValidationError";
                this.code = "42";
            }
            printCustomerMessage(){
                return `Validation failed :-( (details: ${this.message})`;
            }
        }
        try {
            throw new ValidationError("Not a valid phone number");
        }catch(error){
            if (error instanceof ValidationError){
                console.log(error.name);
                console.log(error.printCustomerMessage());
            }else {
                console.log("Unknown error",error);
                throw error;
            }
        }
        class ParentClass {
            constructor(){
                return 1;
            }
        }
        console.log(new ParentClass());
        class ChildClass extends ParentClass {
            constructor(){
                return 1;
            }
        }
        // console.log(new ChildClass());
        class Foo {
            ["constructor"](){
                console.log("called");
                this.a = 1;
            }
        }
        const foo = new Foo();
        console.log(foo);
        foo.constructor();
        console.log(foo);
        class square extends Polygon{
            constructor(length){
                // Here, it calls the parent class' constructor with lengths
                // provided for the Polygon's width and height
                super(length,length);
                // NOTE: In derived classes, `super()` must be called before you
                // can use `this`. Leaving this out will cause a ReferenceError.
                this.name = "Square";
            }
            get area(){
                return this.height * this.width;
            }
            set area(value){
                this.height = value ** 0.5;
                this.width =  value ** 0.5;
            }
        }
        // Make Square extend Rectangle (which is a base class) instead of Polygon
        Object.setPrototypeOf(Square, Rectangle);
        const newInstance = new Square();
        // newInstance is still an instance of Polygon, because we didn't
        // change the prototype of Square.prototype, so the prototype chain
        // of newInstance is still
        //   newInstance --> Square.prototype --> Polygon.prototype
        console.log(newInstance instanceof Polygon);
        console.log(newInstance instanceof Rectangle);
        // However, because super() calls Rectangle as constructor, the name property
        // of newInstance is initialized with the logic in Rectangle
        console.log(newInstance.name);
    </script>
</body>
</html>